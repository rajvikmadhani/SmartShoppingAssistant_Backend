version: 1

services:
    - type: web
      name: Smart Shopping API
      env: node
      plan: free
      buildCommand: npm install
      startCommand: node server.js
      envVarsFromGroup: common-env

    - type: cron
      name: Price Alert Scraper
      schedule: '0 */6 * * *'
      env: node
      buildCommand: npm install
      startCommand: node jobs/scheduler/cronRunner.js
      envVarsFromGroup: common-env

    - type: cron
      name: Full Product Rescrape
      schedule: '0 0 * * *'
      env: node
      buildCommand: npm install
      startCommand: node jobs/scheduler/cronDailyRunner.js
      envVarsFromGroup: common-env

    - type: worker
      name: Notification Worker
      env: node
      buildCommand: npm install
      startCommand: node jobs/workers/notificationWorkerRunner.js
      envVarsFromGroup: common-env
